<div class="toolbar">
  <h2>App Screens</h2>

  <!-- Screen mode -->
  <section class="toolbar-section">
    <h3>Mode écran</h3>
    <div class="btn-group screen-mode-group">
      <button class="btn btn-mode" [class.active]="screenMode() === 1" (click)="setScreenMode(1)">Simple</button>
      <button class="btn btn-mode" [class.active]="screenMode() === 2" (click)="setScreenMode(2)">Double</button>
      <button class="btn btn-mode" [class.active]="screenMode() === 3" (click)="setScreenMode(3)">Triple</button>
    </div>
  </section>

  <!-- Add elements -->
  <section class="toolbar-section">
    <h3>Ajouter</h3>
    <div class="btn-group">
      <button class="btn btn-primary" (click)="addText()">+ Texte</button>
      <button class="btn btn-primary" (click)="addImage()">+ Image</button>
      <button class="btn btn-primary" (click)="addPhoneMockup()">+ Téléphone (avec screenshot)</button>
      <button class="btn btn-secondary" (click)="addEmptyPhoneMockup()">+ Téléphone vide</button>
    </div>
  </section>

  <!-- Built-in images -->
  <section class="toolbar-section">
    <h3>Images intégrées</h3>
    <div class="builtin-images">
      @for (img of builtinImages; track img.name) {
        <button class="btn btn-builtin-image" (click)="addBuiltinImage(img)">
          <img [src]="img.src" [alt]="img.name" class="builtin-thumb" />
          <span>{{ img.name }}</span>
        </button>
      }
    </div>
  </section>

  <!-- Background -->
  <section class="toolbar-section">
    <h3>Fond</h3>
    <div class="field">
      <label>Type</label>
      <select [(ngModel)]="bgType" (ngModelChange)="onBgTypeChange()">
        <option value="solid">Couleur unie</option>
        <option value="gradient">Dégradé</option>
      </select>
    </div>
    @if (bgType === 'solid') {
      <div class="field">
        <label>Couleur</label>
        <input type="color" [(ngModel)]="bgColor" (ngModelChange)="onBgColorChange()" />
      </div>
    } @else {
      <div class="field">
        <label>Début</label>
        <input type="color" [(ngModel)]="gradStart" (ngModelChange)="onGradStartChange()" />
      </div>
      <div class="field">
        <label>Fin</label>
        <input type="color" [(ngModel)]="gradEnd" (ngModelChange)="onGradEndChange()" />
      </div>
      <div class="field">
        <label>Angle ({{ gradAngle }}°)</label>
        <input type="range" min="0" max="360" [(ngModel)]="gradAngle" (ngModelChange)="onGradAngleChange()" />
      </div>
    }
  </section>

  <!-- Layouts -->
  <section class="toolbar-section">
    <h3>Layouts</h3>
    <div class="layout-list">
      @for (layout of layouts; track layout.name) {
        <button class="btn btn-layout" (click)="applyLayout(layout)">
          <strong>{{ layout.name }}</strong>
          <small>{{ layout.description }}</small>
        </button>
      }
    </div>
  </section>

  <!-- Actions -->
  <section class="toolbar-section">
    <div class="btn-group">
      @if (screenMode() === 1) {
        <button class="btn btn-export" (click)="exportPng()">Exporter PNG (1080x1920)</button>
      } @else {
        <button class="btn btn-export" (click)="exportPng()">Exporter {{ screenMode() }} PNG (1080x1920)</button>
      }
      <button class="btn btn-danger" (click)="clearAll()">Tout effacer</button>
    </div>
  </section>
</div>
